# Настройка eBGP

Необходимо настроить BGP между автономными системами и организовать доступность между офисами Москва и С.-Петербург.

![](bgp.png)

Выполним настройку в следующей последовательности:
1. Настройка eBGP между офисом Москва и двумя провайдерами - Киторн и Ламас
2. Настройка eBGP между провайдерами Киторн и Ламас
3. Настройка eBGP между Ламас и Триада
4. Настройка eBGP между офисом С.-Петербург и провайдером Триада
5. Организуете IP доступность между офисами Москва и С.-Петербург

## 1. Настройка eBGP между офисом Москва и двумя провайдерами - Киторн и Ламас
Выполняем следующие настройки на маршрутизаторах:
Москва, AS 1001 (R14):
```
ip route 10.1.0.0 255.255.0.0 Null0
router bgp 1001
neighbor 100.10.0.1 remote-as 101
network 10.1.0.0 mask 255.255.0.0
```

Китрон, AS 101 (R22):
```
ip route 100.10.0.0 255.255.0.0 Null0
router bgp 101
neighbor 100.10.0.2 remote-as 1001
network 100.10.0.0 mask 255.255.0.0
```

Москва, AS 1001 (R15):
```
ip route 10.1.0.0 255.255.0.0 Null0
router bgp 1001
neighbor 100.20.0.1 remote-as 301
network 10.1.0.0 mask 255.255.0.0
```

Ламас, AS 301 (R21):
```
ip route 100.20.0.0 255.255.0.0 Null0
router bgp 301
neighbor 100.20.0.2 remote-as 1001
network 100.10.0.0 mask 255.255.0.0
```

## 2. Настройка eBGP между провайдерами Киторн и Ламас
Выполняем следующие настройки на маршрутизаторах:
Китрон, AS 101 (R22):
```
router bgp 101
neighbor 100.20.0.5 remote-as 301
```

Ламас, AS 301 (R21):
```
router bgp 301
neighbor 100.20.0.6 remote-as 101
```

## 3. Настройка eBGP между Ламас и Триада
Выполняем следующие настройки на маршрутизаторах:
Триада, AS 520 (R24):
```
ip route 100.30.0.0 255.255.0.0 Null0
router bgp 520
neighbor 100.30.0.2 remote-as 301
network 100.30.0.0 mask 255.255.0.0
```

Ламас, AS 301 (R21):
```
router bgp 301
neighbor 100.30.0.1 remote-as 520
```


## 4. Настройка eBGP между офисом С.-Петербург и провайдером Триада
Выполняем следующие настройки на маршрутизаторах:
С-Петербург, AS 2042 (R18):
```
ip route 10.2.0.0 255.255.0.0 Null0
router bgp 2042
neighbor 100.30.0.17 remote-as 520
neighbor 100.30.0.37 remote-as 520
network 10.2.0.0 mask 255.255.0.0
```

Триада, AS 520 (R24):
```
router bgp 520
neighbor 100.30.0.18 remote-as 2042
```

Триада, AS 520 (R26):
```
ip route 100.30.0.0 255.255.0.0 Null0
router bgp 520
neighbor 100.30.0.38 remote-as 2042
network 100.30.0.0 mask 255.255.0.0
```

## 5. Организуете IP доступность между офисами Москва и С.-Петербург
